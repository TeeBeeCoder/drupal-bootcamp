---
title: Exercices √âtape 6
description: Mise en pratique du theming Drupal avec Tailwind CSS et Alpine.js
sidebar:
  order: 6
---

import { Tabs, TabItem, Aside, Card, CardGrid, Steps } from '@astrojs/starlight/components';

## üéØ Objectifs

√Ä la fin de ces exercices, vous aurez :
- Cr√©√© le th√®me TailStore avec Tailwind CSS v4
- Configur√© Vite pour le d√©veloppement avec DDEV
- Impl√©ment√© les templates Twig
- Ajout√© les interactions Alpine.js et Swiper

---

## Exercice 1 : Cr√©ation du th√®me TailStore

<Card title="Dur√©e estim√©e : 25 minutes" icon="clock">
  Cr√©er la structure compl√®te du th√®me personnalis√©.
</Card>

### Objectif

Cr√©er le th√®me `tailstore` avec toutes les configurations n√©cessaires.

### Instructions

<Steps>

1. **Cr√©er la structure du th√®me**

   Dans le dossier `web/themes/custom/`, cr√©ez la structure suivante :

   ```bash
   mkdir -p tailstore/{assets/images,dist,templates}
   ```

2. **Cr√©er le fichier tailstore.info.yml**

   ```yaml
   name: TailStore
   type: theme
   description: 'Th√®me e-commerce moderne avec Tailwind CSS et Alpine.js'
   core_version_requirement: ^10 || ^11
   base theme: false

   regions:
     header: 'Header'
     primary_menu: 'Main Menu'
     secondary_menu: 'Secondary Menu'
     highlighted: 'Highlighted'
     breadcrumb: 'Breadcrumb'
     help: 'Help'
     content: 'Main Content'
     sidebar: 'Sidebar'
     before_content: 'Before Content'
     footer_top: 'Footer Top'
     footer_bottom: 'Footer Bottom'

   libraries:
     - tailstore/global
   ```

3. **Cr√©er tailstore.libraries.yml**

   ```yaml
   global:
     version: 1.0.0
     css:
       theme:
         dist/assets/main.css: { minified: true }
     js:
       dist/assets/main.js: { defer: true }
     dependencies:
       - core/drupal
       - core/once
   ```

</Steps>

### Validation ‚úì

- [ ] Dossier `tailstore` cr√©√© dans `themes/custom`
- [ ] Fichier `.info.yml` avec les r√©gions correctes
- [ ] Fichier `.libraries.yml` pointant vers `dist/assets`

---

## Exercice 2 : Configuration de l'environnement de build

<Card title="Dur√©e estim√©e : 30 minutes" icon="clock">
  Configurer Vite, Tailwind CSS v4 et l'int√©gration DDEV.
</Card>

### Objectif

Mettre en place l'outillage frontend moderne.

### Instructions

<Steps>

1. **Initialiser le projet Node.js**

   ```bash
   cd web/themes/custom/tailstore
   npm init -y
   ```

2. **Installer les d√©pendances**

   ```bash
   npm install -D vite tailwindcss @tailwindcss/vite @tailwindcss/forms vite-plugin-live-reload alpinejs
   npm install swiper
   ```

3. **Configurer package.json**

   Modifiez le fichier `package.json` pour ajouter `type: "module"` et les scripts :

   ```json
   {
     "name": "tailstore-theme",
     "version": "1.0.0",
     "type": "module",
     "scripts": {
       "dev": "vite",
       "build": "vite build",
       "preview": "vite preview"
     },
     // ... d√©pendances ...
   }
   ```

4. **Cr√©er vite.config.js**

   Ce fichier configure Vite pour fonctionner avec DDEV (SSL, HMR) et Tailwind.

   ```javascript
   import { defineConfig } from 'vite'
   import tailwindcss from '@tailwindcss/vite'
   import liveReload from 'vite-plugin-live-reload'
   import fs from 'fs'

   export default defineConfig({
     plugins: [
       tailwindcss(),
       liveReload([
         'templates/**/*.twig',
         'assets/**/*.css',
         'assets/**/*.js',
         '*.theme',
         'config/**/*.yml',
       ]),
     ],
     server: {
       host: '0.0.0.0',
       port: 5173,
       strictPort: true,
       // Adaptez l'URL si votre projet DDEV a un nom diff√©rent
       origin: 'https://tailstore.ddev.site:5173',
       cors: true,
       https: {
         key: fs.readFileSync('/etc/ssl/certs/master.key'),
         cert: fs.readFileSync('/etc/ssl/certs/master.crt'),
       },
       hmr: {
         protocol: 'wss',
         host: 'tailstore.ddev.site',
         clientPort: 5173,
       },
     },
     build: {
       outDir: 'dist',
       rollupOptions: {
         input: {
           main: 'assets/main.js',
         },
         output: {
           entryFileNames: 'assets/[name].js',
           chunkFileNames: 'assets/[name].js',
           assetFileNames: 'assets/[name].[ext]',
         },
       },
     },
   })
   ```

   <Aside type="tip">
     Assurez-vous que le `host` dans `hmr` correspond √† l'URL de votre projet DDEV (`ddev describe`).
   </Aside>

</Steps>

### Validation ‚úì

- [ ] `node_modules` install√©
- [ ] `vite.config.js` cr√©√© avec la configuration SSL DDEV
- [ ] Scripts `dev` et `build` pr√©sents dans `package.json`

---

## Exercice 3 : Styles et JavaScript

<Card title="Dur√©e estim√©e : 25 minutes" icon="clock">
  Mettre en place Tailwind CSS et les points d'entr√©e JS.
</Card>

### Objectif

Cr√©er les fichiers sources CSS et JS.

### Instructions

<Steps>

1. **Cr√©er assets/style.css**

   Configuration de Tailwind v4 avec le th√®me personnalis√©.

   ```css
   @import "tailwindcss";
   @plugin "@tailwindcss/forms";

   @theme {
     --color-primary: #ff0042;
     --color-white: #ffffff;
     --color-black: #010717;
     --color-gray-lighter: #FAF7F3;
     --color-gray-light: #323232;
     --color-gray-dark: #010717;
     --color-gray-txt: #4c4d56;
     --color-gray-line: #E5E5E5;

     --font-display: "Manrope", sans-serif;

     --breakpoint-sm: 640px;
     --breakpoint-md: 768px;
     --breakpoint-lg: 1024px;
     --breakpoint-xl: 1280px;

     --container-padding: 1rem;
   }
   ```

2. **Cr√©er assets/main.js**

   Point d'entr√©e principal qui importe le CSS, Alpine.js et Swiper. Nous utilisons une IIFE et les comportements Drupal pour une int√©gration propre.

   ```javascript
   import './style.css'
   import Alpine from 'alpinejs'
   import Swiper from 'swiper';
   import { Navigation, Autoplay } from 'swiper/modules';
   import 'swiper/css';
   import 'swiper/css/navigation';

   // Initialisation d'Alpine
   window.Alpine = Alpine
   Alpine.start()

   (function (Drupal, once) {
     Drupal.behaviors.tailstore = {
       attach: function (context, settings) {
         // Initialisation du Slider (Swiper) avec 'once' pour √©viter les doublons
         const sliders = once('tailstore-slider', '.main-slider', context);
         
         sliders.forEach((element) => {
           new Swiper(element, {
             modules: [Navigation, Autoplay],
             loop: true,
             autoplay: {
               delay: 5000,
             },
             navigation: {
               nextEl: '.swiper-button-next',
               prevEl: '.swiper-button-prev',
             },
           });
         });
       }
     };
   })(Drupal, once);
   ```

3. **Lancer le serveur de d√©veloppement**

   ```bash
   npm run dev
   ```

   V√©rifiez que le serveur d√©marre sans erreur sur le port 5173.

</Steps>

### Validation ‚úì

- [ ] `assets/style.css` contient la config `@theme`
- [ ] `assets/main.js` importe les librairies
- [ ] `npm run dev` fonctionne

---

## Exercice 4 : Template de page

<Card title="Dur√©e estim√©e : 40 minutes" icon="clock">
  Int√©grer le template HTML dans Drupal.
</Card>

### Objectif

Cr√©er le fichier `page.html.twig` avec la structure Tailwind.

### Instructions

<Steps>

1. **Activer le th√®me**

   ```bash
   ddev drush theme:enable tailstore
   ddev drush config-set system.theme default tailstore -y
   ddev drush cr
   ```

2. **Cr√©er templates/page.html.twig**

   Voici la structure de base √† adapter :

   ```twig
   {# templates/page.html.twig #}
   <header class="bg-gray-dark sticky top-0 z-50">
       <div class="container mx-auto flex justify-between items-center py-4">
           <!-- Logo -->
           <a href="{{ path('<front>') }}" class="flex items-center">
               <img src="{{ base_path ~ directory }}/assets/images/template-white-logo.png" alt="Logo" class="h-14 w-auto mr-4">
           </a>

           <!-- Menu Desktop -->
           <nav class="hidden lg:flex md:grow justify-center">
               {% if page.primary_menu %}
                   {{ page.primary_menu }}
               {% else %}
                   <!-- Menu statique pour le d√©veloppement -->
                   <ul class="flex justify-center space-x-4 text-white">
                       <li><a href="{{ path('<front>') }}" class="hover:text-primary font-semibold">Home</a></li>
                       <!-- Dropdown Alpine.js -->
                       <li class="relative group" x-data="{ open: false }">
                           <a href="#" @mouseover="open = true" @mouseleave="open = false" class="hover:text-primary font-semibold flex items-center">
                               Men <i :class="open ? 'fas fa-chevron-up ml-1 text-xs' : 'fas fa-chevron-down ml-1 text-xs'"></i>
                           </a>
                           <ul x-show="open" class="absolute left-0 bg-white text-black space-y-2 mt-1 p-2 rounded shadow-lg" x-cloak>
                               <li><a href="#" class="block px-4 py-2 hover:bg-primary hover:text-white rounded">T-Shirts</a></li>
                           </ul>
                       </li>
                   </ul>
               {% endif %}
           </nav>

           <!-- Actions (Cart, Search, User) -->
           <div class="hidden lg:flex items-center space-x-4">
               <!-- Cart Icon -->
               <div class="relative group">
                   <a href="/cart">
                       <img src="{{ base_path ~ directory }}/assets/images/cart-shopping.svg" alt="Cart" class="h-6 w-6">
                   </a>
               </div>
           </div>
       </div>
   </header>

   <main>
       {% if page.highlighted %}
           <div class="highlighted-region">
               {{ page.highlighted }}
           </div>
       {% endif %}

       <div id="content" class="container mx-auto py-8">
           {{ page.content }}
       </div>
   </main>

   <footer class="border-t border-gray-line py-10">
       <div class="container mx-auto px-4">
           {{ page.footer_top }}
           <div class="text-center mt-8">
               <p>&copy; {{ "now"|date("Y") }} TailStore. All rights reserved.</p>
           </div>
       </div>
   </footer>
   ```

3. **Ajouter les images**

   T√©l√©chargez l'archive des images depuis [tailstore-images.zip](/tailstore-images.zip) et extrayez-la dans le dossier `assets/images/`.

   ```bash
   # Dans le dossier du th√®me
   unzip ~/Downloads/tailstore-images.zip -d assets/
   ```

   <Aside type="tip">
     L'archive contient tous les logos, ic√¥nes et images n√©cessaires pour le th√®me TailStore.
   </Aside>

4. **Vider le cache**

   ```bash
   ddev drush cr
   ```

</Steps>

### Validation ‚úì

- [ ] Le header s'affiche avec le logo
- [ ] Le menu d√©roulant fonctionne (Alpine.js)
- [ ] Le footer est pr√©sent

---

## Exercice 5 : Build Production

<Card title="Dur√©e estim√©e : 10 minutes" icon="clock">
  G√©n√©rer les assets finaux.
</Card>

### Objectif

Pr√©parer le th√®me pour la production.

### Instructions

<Steps>

1. **Lancer le build**

   ```bash
   npm run build
   ```

   Cela va g√©n√©rer les fichiers minifi√©s dans `dist/assets/`.

2. **V√©rifier le fonctionnement**

   Arr√™tez le serveur de d√©veloppement (`Ctrl+C`) et rechargez la page Drupal. Le site doit fonctionner correctement en utilisant les fichiers de `dist/`.

</Steps>

### Validation ‚úì

- [ ] Dossier `dist` contient `main.css` et `main.js`
- [ ] Le site s'affiche correctement sans `npm run dev`

---

## üèÜ R√©capitulatif √âtape 6

<CardGrid>
  <Card title="Th√®me cr√©√©" icon="puzzle">
    Structure standard Drupal
  </Card>
  <Card title="Vite & Tailwind" icon="seti:css">
    Environnement de dev moderne
  </Card>
  <Card title="Interactions" icon="rocket">
    Alpine.js et Swiper int√©gr√©s
  </Card>
</CardGrid>
