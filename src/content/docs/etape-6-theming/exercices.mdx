---
title: Exercices √âtape 6
description: Mise en pratique du theming Drupal avec Tailwind CSS et Alpine.js
sidebar:
  order: 6
---

import { Tabs, TabItem, Aside, Card, CardGrid, Steps } from '@astrojs/starlight/components';

## üéØ Objectifs

√Ä la fin de ces exercices, vous aurez :
- Cr√©√© le th√®me TailStore avec Tailwind CSS v4
- Impl√©ment√© les templates Twig pour les produits
- Ajout√© les interactions Alpine.js
- Configur√© le build CSS/JS

---

## Exercice 1 : Cr√©ation du th√®me TailStore

<Card title="Dur√©e estim√©e : 30 minutes" icon="clock">
  Cr√©er la structure compl√®te du th√®me personnalis√©.
</Card>

### Objectif

Cr√©er le th√®me `tailstore` avec toutes les configurations n√©cessaires.

### Instructions

<Steps>

1. **Cr√©er la structure du th√®me**

   ```bash
   mkdir -p themes/custom/tailstore/{css/{src,dist},js/{src,dist},templates,images}
   ```

2. **Cr√©er le fichier tailstore.info.yml**

   ```yaml
   name: TailStore
   type: theme
   description: 'Th√®me e-commerce moderne avec Tailwind CSS et Alpine.js'
   core_version_requirement: ^10 || ^11
   base theme: false

   regions:
     header: 'En-t√™te'
     primary_menu: 'Menu principal'
     secondary_menu: 'Menu secondaire'
     highlighted: 'Mise en avant'
     breadcrumb: 'Fil d'Ariane'
     help: 'Aide'
     content: 'Contenu principal'
     sidebar: 'Barre lat√©rale'
     content_below: 'Sous le contenu'
     footer_top: 'Pied de page (haut)'
     footer_bottom: 'Pied de page (bas)'

   libraries:
     - tailstore/global
   ```

3. **Cr√©er tailstore.libraries.yml**

   ```yaml
   global:
     version: 1.0
     css:
       theme:
         css/dist/tailwind.css: { minified: true }
     js:
       js/dist/app.js: { defer: true }
     dependencies:
       - core/drupal
   ```

4. **Initialiser npm et Tailwind**

   ```bash
   cd themes/custom/tailstore
   npm init -y
   npm install -D tailwindcss @tailwindcss/cli alpinejs esbuild
   ```

5. **Cr√©er package.json avec scripts**

   ```json
   {
     "name": "tailstore-theme",
     "version": "1.0.0",
     "scripts": {
       "build:css": "tailwindcss -i css/src/tailwind.css -o css/dist/tailwind.css --minify",
       "build:js": "esbuild js/src/app.js --bundle --minify --outfile=js/dist/app.js",
       "build": "npm run build:css && npm run build:js",
       "watch:css": "tailwindcss -i css/src/tailwind.css -o css/dist/tailwind.css --watch",
       "watch:js": "esbuild js/src/app.js --bundle --outfile=js/dist/app.js --watch",
       "dev": "npm run watch:css & npm run watch:js"
     }
   }
   ```

6. **Activer le th√®me**

   ```bash
   ddev drush theme:enable tailstore
   ddev drush config-set system.theme default tailstore -y
   ddev drush cr
   ```

</Steps>

### Validation ‚úì

- [ ] Structure du th√®me cr√©√©e
- [ ] Fichier .info.yml valide
- [ ] Librairies d√©clar√©es
- [ ] npm configur√©
- [ ] Th√®me activ√© et visible

---

## Exercice 2 : Configuration Tailwind CSS

<Card title="Dur√©e estim√©e : 25 minutes" icon="clock">
  Configurer Tailwind avec les couleurs et composants TailStore.
</Card>

### Objectif

Cr√©er un syst√®me de design coh√©rent avec Tailwind CSS v4.

### Instructions

<Steps>

1. **Cr√©er css/src/tailwind.css**

   ```css
   @import "tailwindcss";

   @theme {
     /* Palette TailStore */
     --color-primary: #0073e6;
     --color-primary-dark: #005bb5;
     --color-secondary: #6c757d;
     --color-accent: #ff6b35;
     --color-success: #28a745;
     --color-warning: #ffc107;
     --color-danger: #dc3545;
     --color-dark: #1a1a2e;
     --color-light: #f8f9fa;
     
     /* Fonts */
     --font-sans: 'Inter', ui-sans-serif, system-ui, sans-serif;
     --font-heading: 'Poppins', var(--font-sans);
     
     /* Radius */
     --radius-btn: 0.375rem;
     --radius-card: 0.5rem;
     --radius-badge: 9999px;
   }

   @layer components {
     /* Boutons */
     .btn {
       @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 font-medium rounded-btn transition-all duration-200 cursor-pointer;
     }
     
     .btn-primary {
       @apply bg-primary text-white hover:bg-primary-dark active:scale-95;
     }
     
     .btn-secondary {
       @apply bg-gray-200 text-gray-800 hover:bg-gray-300;
     }
     
     .btn-outline {
       @apply border-2 border-primary text-primary hover:bg-primary hover:text-white;
     }
     
     .btn-ghost {
       @apply text-gray-600 hover:bg-gray-100;
     }
     
     .btn-icon {
       @apply p-2 rounded-full;
     }

     /* Cards */
     .card {
       @apply bg-white rounded-card shadow-md hover:shadow-lg transition-shadow;
     }
     
     .card-body {
       @apply p-4;
     }

     /* Badges */
     .badge {
       @apply inline-flex items-center px-2.5 py-0.5 text-xs font-semibold rounded-badge;
     }
     
     .badge-sale {
       @apply bg-danger text-white;
     }
     
     .badge-new {
       @apply bg-primary text-white;
     }

     /* Form */
     .form-input {
       @apply w-full px-4 py-2.5 border border-gray-300 rounded-btn focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all;
     }
     
     .form-label {
       @apply block text-sm font-medium text-gray-700 mb-1.5;
     }
     
     .form-select {
       @apply form-input appearance-none bg-no-repeat bg-right pr-10;
       background-image: url("data:image/svg+xml,...");
     }

     /* Sections */
     .section {
       @apply py-12 md:py-16;
     }
     
     .section-title {
       @apply text-2xl md:text-3xl font-heading font-bold text-dark mb-8;
     }
   }
   ```

2. **Cr√©er tailwind.config.js**

   ```javascript
   export default {
     content: [
       './templates/**/*.twig',
       './js/**/*.js',
       '../../../modules/custom/**/*.twig',
     ],
   };
   ```

3. **Builder et v√©rifier**

   ```bash
   npm run build:css
   ls -lh css/dist/tailwind.css
   ```

</Steps>

### Validation ‚úì

- [ ] Couleurs personnalis√©es d√©finies
- [ ] Composants btn, card, badge cr√©√©s
- [ ] CSS compil√© sans erreur
- [ ] Taille fichier < 50kb (minifi√©)

---

## Exercice 3 : Template de la page principale

<Card title="Dur√©e estim√©e : 40 minutes" icon="clock">
  Cr√©er le template page.html.twig avec toutes les r√©gions.
</Card>

### Objectif

Impl√©menter la structure HTML/Tailwind de la page principale.

### Instructions

<Steps>

1. **Cr√©er templates/page.html.twig**

   Impl√©mentez la structure compl√®te avec :
   - Header sticky avec logo, navigation, actions
   - Zone highlighted pour sliders/hero
   - Contenu avec sidebar optionnelle
   - Footer multi-colonnes

2. **Ajouter le support du menu mobile**

   Ajoutez un bouton hamburger visible sur mobile qui dispatche un √©v√©nement Alpine.

3. **Cr√©er le template html.html.twig**

   Ajoutez les classes de base :
   ```twig
   <body class="antialiased text-gray-900 bg-light">
   ```

4. **Tester la mise en page**

   V√©rifiez le responsive √† diff√©rentes tailles.

</Steps>

### Code de d√©part

```twig
{# templates/page.html.twig #}
<div class="min-h-screen flex flex-col">
  
  <header class="bg-white shadow-sm sticky top-0 z-50">
    {# TODO: Impl√©menter le header #}
  </header>
  
  {% if page.highlighted %}
    <section class="relative">
      {{ page.highlighted }}
    </section>
  {% endif %}
  
  <main class="grow py-8">
    <div class="container mx-auto px-4 max-w-7xl">
      {# TODO: Impl√©menter content + sidebar #}
    </div>
  </main>
  
  <footer class="bg-dark text-white mt-auto">
    {# TODO: Impl√©menter le footer #}
  </footer>
  
</div>
```

### Validation ‚úì

- [ ] Header avec toutes les r√©gions
- [ ] Contenu responsive avec sidebar
- [ ] Footer multi-colonnes
- [ ] Menu mobile fonctionnel

---

## Exercice 4 : Product Card Template

<Card title="Dur√©e estim√©e : 45 minutes" icon="clock">
  Cr√©er le template de carte produit avec interactions.
</Card>

### Objectif

Impl√©menter le template de teaser produit avec tous les √©l√©ments visuels.

### Instructions

<Steps>

1. **Cr√©er node--product--teaser.html.twig**

   √âl√©ments requis :
   - Badge promo si prix sold√©
   - Image avec hover zoom
   - Actions rapides (wishlist, quick view)
   - Marque, nom, prix
   - Couleurs disponibles
   - Bouton ajouter au panier

2. **Ajouter les donn√©es Alpine.js**

   ```twig
   <article x-data="{ 
     product: {
       id: {{ node.id }},
       name: '{{ label|escape('js') }}',
       price: {{ node.field_price.value }},
       image: '{{ file_url(node.field_images.0.entity.fileuri) }}'
     }
   }">
   ```

3. **G√©rer le calcul de remise**

   Si `field_old_price` existe et est sup√©rieur √† `field_price`, afficher le badge.

4. **Limiter les couleurs affich√©es**

   Afficher max 5 couleurs avec "+X" si plus.

</Steps>

### Astuces Twig

```twig
{# Calcul du pourcentage de remise #}
{% set discount = ((old_price - price) / old_price * 100)|round %}

{# Limiter un tableau #}
{% for color in colors|slice(0, 5) %}

{# Compter le reste #}
{% if colors|length > 5 %}
  +{{ colors|length - 5 }}
{% endif %}
```

### Validation ‚úì

- [ ] Badge de remise calcul√© dynamiquement
- [ ] Image avec effet hover
- [ ] Actions quick view/wishlist
- [ ] Couleurs avec limitation
- [ ] Bouton panier fonctionnel

---

## Exercice 5 : Alpine.js Store & Mini-Cart

<Card title="Dur√©e estim√©e : 50 minutes" icon="clock">
  Impl√©menter le panier c√¥t√© client avec Alpine.js.
</Card>

### Objectif

Cr√©er un syst√®me de panier complet avec persistance localStorage.

### Instructions

<Steps>

1. **Cr√©er js/src/stores/cart.js**

   Impl√©mentez le store Alpine avec :
   - `items` : tableau des produits
   - `count` : getter nombre total
   - `total` : getter montant total
   - `add()` : ajouter/incr√©menter
   - `remove()` : supprimer
   - `updateQuantity()` : modifier quantit√©
   - `save()` : persister localStorage

2. **Cr√©er js/src/app.js**

   ```javascript
   import Alpine from 'alpinejs';
   import './stores/cart.js';
   
   window.Alpine = Alpine;
   Alpine.start();
   ```

3. **Cr√©er le template mini-cart**

   Dans le header, dropdown avec :
   - Ic√¥ne panier + badge count
   - Liste des articles
   - Bouton supprimer par article
   - Total et lien checkout

4. **Builder et tester**

   ```bash
   npm run build:js
   ```

</Steps>

### Test fonctionnel

1. Ajouter un produit au panier
2. Rafra√Æchir la page ‚Üí panier conserv√©
3. Modifier quantit√©
4. Supprimer un article
5. V√©rifier le total

### Validation ‚úì

- [ ] Store cart fonctionnel
- [ ] Persistance localStorage
- [ ] Mini-cart dropdown
- [ ] Animations transitions
- [ ] Total calcul√© correctement

---

## Exercice 6 : Page Produit Compl√®te

<Card title="Dur√©e estim√©e : 45 minutes" icon="clock">
  Cr√©er le template full du produit avec galerie.
</Card>

### Objectif

Impl√©menter la page d√©tail produit avec galerie interactive.

### Instructions

<Steps>

1. **Cr√©er node--product--full.html.twig**

   Layout 2 colonnes :
   - Gauche : galerie images
   - Droite : infos produit

2. **Impl√©menter la galerie Alpine.js**

   ```twig
   <div x-data="{ activeImage: 0 }">
     {# Image principale #}
     {# Miniatures cliquables #}
   </div>
   ```

3. **Ajouter le s√©lecteur de taille/couleur**

   ```twig
   <div x-data="{ selectedSize: null, selectedColor: null }">
   ```

4. **S√©lecteur de quantit√©**

   ```twig
   <div x-data="{ qty: 1 }">
     <button @click="qty = Math.max(1, qty - 1)">‚àí</button>
     <input x-model="qty" type="number">
     <button @click="qty++">+</button>
   </div>
   ```

5. **Onglets description/avis**

   ```twig
   <div x-data="{ tab: 'description' }">
   ```

</Steps>

### Validation ‚úì

- [ ] Galerie avec miniatures
- [ ] S√©lecteurs taille/couleur
- [ ] S√©lecteur quantit√©
- [ ] Onglets fonctionnels
- [ ] Bouton ajouter au panier

---

## Exercice 7 : Notifications Toast

<Card title="Dur√©e estim√©e : 20 minutes" icon="clock">
  Syst√®me de notifications toast.
</Card>

### Objectif

Afficher des messages de confirmation anim√©s.

### Instructions

<Steps>

1. **Cr√©er le composant toast dans app.js**

   ```javascript
   document.addEventListener('alpine:init', () => {
     Alpine.data('toasts', () => ({
       items: [],
       add(message, type = 'success') {
         const id = Date.now();
         this.items.push({ id, message, type });
         setTimeout(() => this.remove(id), 4000);
       },
       remove(id) {
         this.items = this.items.filter(t => t.id !== id);
       }
     }));
   });
   ```

2. **Cr√©er le template block--toasts.html.twig**

   Position fixed, animations de slide.

3. **D√©clencher depuis le panier**

   ```javascript
   add(product) {
     // ...
     window.dispatchEvent(new CustomEvent('toast', {
       detail: { message: `${product.name} ajout√©`, type: 'success' }
     }));
   }
   ```

</Steps>

### Validation ‚úì

- [ ] Toast appara√Æt √† l'ajout panier
- [ ] Animation entr√©e/sortie
- [ ] Auto-disparition apr√®s 4s
- [ ] Bouton fermer manuel

---

## Exercice 8 : Build Production

<Card title="Dur√©e estim√©e : 15 minutes" icon="clock">
  Optimiser pour la production.
</Card>

### Objectif

Pr√©parer les assets pour le d√©ploiement.

### Instructions

<Steps>

1. **V√©rifier le contenu Tailwind**

   ```javascript
   // tailwind.config.js
   export default {
     content: [
       './templates/**/*.twig',
       './js/**/*.js',
       '../../../modules/custom/**/*.twig',
     ],
   };
   ```

2. **Build minifi√©**

   ```bash
   npm run build
   ```

3. **V√©rifier les tailles**

   ```bash
   ls -lh css/dist/tailwind.css
   ls -lh js/dist/app.js
   ```

4. **Tester sans erreurs console**

   Ouvrir DevTools, v√©rifier aucune erreur.

5. **Commit final**

   ```bash
   git add themes/custom/tailstore
   git commit -m "feat: complete TailStore theme with Tailwind and Alpine"
   ```

</Steps>

### Objectifs de taille

| Fichier | Taille max |
|---------|-----------|
| tailwind.css | < 50kb |
| app.js | < 30kb |

### Validation ‚úì

- [ ] CSS purg√© et minifi√©
- [ ] JS bundl√© et minifi√©
- [ ] Aucune erreur console
- [ ] Site rapide au chargement

---

## üèÜ R√©capitulatif √âtape 6

<CardGrid>
  <Card title="Th√®me cr√©√©" icon="puzzle">
    Structure compl√®te avec regions
  </Card>
  <Card title="Tailwind configur√©" icon="seti:css">
    Design system coh√©rent
  </Card>
  <Card title="Templates Twig" icon="document">
    Product card et page compl√®te
  </Card>
  <Card title="Alpine.js int√©gr√©" icon="rocket">
    Panier et interactions
  </Card>
</CardGrid>

## üìÅ Structure finale du th√®me

```
themes/custom/tailstore/
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tailwind.css
‚îÇ   ‚îî‚îÄ‚îÄ dist/
‚îÇ       ‚îî‚îÄ‚îÄ tailwind.css
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stores/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ cart.js
‚îÇ   ‚îî‚îÄ‚îÄ dist/
‚îÇ       ‚îî‚îÄ‚îÄ app.js
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ html.html.twig
‚îÇ   ‚îú‚îÄ‚îÄ page.html.twig
‚îÇ   ‚îú‚îÄ‚îÄ node--product--teaser.html.twig
‚îÇ   ‚îú‚îÄ‚îÄ node--product--full.html.twig
‚îÇ   ‚îî‚îÄ‚îÄ block--mini-cart.html.twig
‚îú‚îÄ‚îÄ images/
‚îú‚îÄ‚îÄ tailstore.info.yml
‚îú‚îÄ‚îÄ tailstore.libraries.yml
‚îú‚îÄ‚îÄ tailstore.theme
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tailwind.config.js
```

## üîú Prochaine √©tape

Le th√®me est pr√™t ! Dans l'[√âtape 7](/etape-7-modules/), nous ajouterons les modules contributifs essentiels (Pathauto, Metatag, Webform...).

---

## Exercice 7 : JavaScript avec IIFE

<Card title="Dur√©e estim√©e : 30 minutes" icon="clock">
  Impl√©menter le JavaScript avec les bonnes pratiques IIFE.
</Card>

### Objectif

Refactoriser le code JavaScript pour utiliser les IIFE et les comportements Drupal.

### Instructions

<Steps>

1. **Modifier js/src/app.js avec IIFE**

   ```javascript
   (function($, Drupal, once) {
     'use strict';
     
     // Store Alpine.js (variables priv√©es)
     var cartStore = {
       items: Alpine.store('cart').items || [],
       get count() {
         return this.items.reduce((sum, item) => sum + item.quantity, 0);
       }
     };
     
     // Comportements Drupal (accessibles globalement)
     Drupal.behaviors.tailstoreCart = {
       attach: function(context, settings) {
         // Initialisation du panier
         once('cart-init', '.cart-container', context).forEach(function(element) {
           console.log('Panier initialis√©');
         });
       }
     };
     
     Drupal.behaviors.tailstoreMobileMenu = {
       attach: function(context, settings) {
         once('mobile-menu', '.mobile-menu-toggle', context).forEach(function(element) {
           $(element).on('click', function() {
             $('.main-navigation').toggleClass('is-open');
           });
         });
       }
     };
     
   })(jQuery, Drupal, once);
   ```

2. **Ajouter les d√©pendances dans libraries.yml**

   ```yaml
   global:
     version: 1.0.0
     css:
       theme:
         css/dist/tailwind.css: { minified: true }
     js:
       js/dist/app.js: { defer: true }
     dependencies:
       - core/drupal
       - core/once
       - tailstore/alpine
   ```

3. **Cr√©er la librairie Alpine.js**

   ```yaml
   alpine:
     version: 3.14.1
     remote: https://alpinejs.dev/
     license:
       name: MIT
       url: https://github.com/alpinejs/alpine/blob/main/LICENSE.md
       gpl-compatible: true
     js:
       https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js: { type: external, attributes: { defer: true } }
   ```

4. **Tester les comportements**

   ```bash
   npm run build:js
   ddev drush cr
   ```

</Steps>

### Validation ‚úì

- [ ] Code dans une IIFE avec 'use strict'
- [ ] Injection de d√©pendances (jQuery, Drupal, once)
- [ ] Utilisation de Drupal.behaviors
- [ ] Fonction once() pour √©viter les doublons
- [ ] Librairies correctement d√©clar√©es

---

## Exercice 8 : Hooks PHP personnalis√©s

<Card title="Dur√©e estim√©e : 35 minutes" icon="clock">
  Impl√©menter les hooks PHP pour personnaliser le th√®me.
</Card>

### Objectif

Ajouter de la logique PHP personnalis√©e via les hooks Drupal.

### Instructions

<Steps>

1. **Cr√©er tailstore.theme**

   ```php
   <?php

   /**
    * @file
    * Functions to support theming in the TailStore theme.
    */

   use Drupal\Core\Form\FormStateInterface;

   /**
    * Implements hook_preprocess_html().
    */
   function tailstore_preprocess_html(&$variables) {
     // Classes CSS contextuelles
     $variables['attributes']['class'][] = 'tailstore-theme';
     
     // Classe pour les pages produit
     $node = \Drupal::routeMatch()->getParameter('node');
     if ($node && $node->bundle() === 'product') {
       $variables['attributes']['class'][] = 'page-product';
     }
   }

   /**
    * Implements hook_preprocess_page().
    */
   function tailstore_preprocess_page(&$variables) {
     // Charger les librairies selon le contexte
     if (\Drupal::service('path.matcher')->isFrontPage()) {
       $variables['#attached']['library'][] = 'tailstore/slider';
     }
   }

   /**
    * Implements hook_preprocess_node().
    */
   function tailstore_preprocess_node(&$variables) {
     $node = $variables['node'];
     
     if ($node->bundle() === 'product') {
       // Formater le prix
       if ($node->hasField('field_price') && !$node->get('field_price')->isEmpty()) {
         $variables['formatted_price'] = number_format(
           $node->get('field_price')->value,
           2,
           ',',
           ' '
         ) . ' ‚Ç¨';
       }
       
       // V√©rifier le stock
       if ($node->hasField('field_stock')) {
         $variables['in_stock'] = $node->get('field_stock')->value > 0;
       }
     }
   }

   /**
    * Implements hook_form_alter().
    */
   function tailstore_form_alter(&$form, FormStateInterface $form_state, $form_id) {
     // Personnaliser la recherche
     if ($form_id === 'search_block_form') {
       $form['keys']['#attributes']['placeholder'] = t('Rechercher...');
     }
   }
   ```

2. **Ajouter les librairies manquantes**

   ```yaml
   slider:
     version: 1.0.0
     css:
       component:
         css/components/slider.css: {}
     js:
       js/slider.js: {}
     dependencies:
       - tailstore/global
   ```

3. **Cr√©er js/slider.js avec IIFE**

   ```javascript
   (function($, Drupal, once) {
     'use strict';
     
     Drupal.behaviors.tailstoreSlider = {
       attach: function(context, settings) {
         once('product-slider', '.product-slider', context).forEach(function(element) {
           // Initialisation du slider
           new Swiper(element, {
             slidesPerView: 1,
             spaceBetween: 10,
             navigation: {
               nextEl: '.swiper-button-next',
               prevEl: '.swiper-button-prev',
             },
           });
         });
       }
     };
     
   })(jQuery, Drupal, once);
   ```

4. **Vider le cache et tester**

   ```bash
   ddev drush cr
   ```

</Steps>

### Validation ‚úì

- [ ] Fichier .theme cr√©√© avec hooks
- [ ] Variables preprocess√©es correctement
- [ ] Librairies charg√©es contextuellement
- [ ] Formulaires alt√©r√©s
- [ ] Cache vid√© et changements visibles

---

## Exercice 9 : Optimisation et bonnes pratiques

<Card title="Dur√©e estim√©e : 20 minutes" icon="clock">
  Optimiser le th√®me selon les bonnes pratiques Drupal.
</Card>

### Objectif

Appliquer les bonnes pratiques de performance et maintenabilit√©.

### Instructions

<Steps>

1. **Optimiser les librairies**

   ```yaml
   global:
     version: 1.0.0
     css:
       theme:
         css/dist/tailwind.css: { minified: true, preprocess: true }
     js:
       js/dist/app.js: { minified: true, defer: true, preprocess: true }
     dependencies:
       - core/drupal
       - core/once
   ```

2. **Ajouter les attributs de performance**

   ```yaml
   # JS avec attributs de performance
   cart:
     version: 1.0.0
     js:
       js/cart.js: { 
         attributes: { defer: true },
         preprocess: false  # Ne pas aggr√©g√©r si n√©cessaire
       }
     dependencies:
       - tailstore/global
       - core/drupalSettings
   ```

3. **Cr√©er un hook de suggestions de template**

   ```php
   /**
    * Implements hook_theme_suggestions_node_alter().
    */
   function tailstore_theme_suggestions_node_alter(array &$suggestions, array $variables) {
     $node = $variables['elements']['#node'];
     $view_mode = $variables['elements']['#view_mode'];
     
     // Template sp√©cial pour produits en promotion
     if ($node->bundle() === 'product' && $node->hasField('field_featured')) {
       if ($node->get('field_featured')->value) {
         $suggestions[] = 'node__product__featured';
         $suggestions[] = 'node__product__' . $view_mode . '__featured';
       }
     }
   }
   ```

4. **V√©rifier les performances**

   ```bash
   # Taille des fichiers g√©n√©r√©s
   ls -lh css/dist/ js/dist/
   
   # V√©rifier l'aggr√©gation
   ddev drush config:get system.performance
   ```

</Steps>

### Checklist final

- [ ] Librairies optimis√©es (minifi√©es, aggr√©g√©es)
- [ ] Attributs de performance (defer, async)
- [ ] Hooks de suggestions impl√©ment√©s
- [ ] Cache et aggr√©gation fonctionnels
- [ ] Th√®me pr√™t pour la production

## üéâ F√©licitations !

Vous avez termin√© l'√©tape 6 ! Votre th√®me TailStore est maintenant complet avec :
- ‚úÖ Structure moderne avec Tailwind CSS v4
- ‚úÖ Templates Twig responsives
- ‚úÖ Interactions Alpine.js
- ‚úÖ JavaScript avec IIFE et comportements Drupal
- ‚úÖ Hooks PHP personnalis√©s
- ‚úÖ Optimisations de performance

Passez √† l'[√âtape 7](/etape-7-modules/) pour ajouter les modules contributifs !
