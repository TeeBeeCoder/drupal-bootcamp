---
title: Tailwind CSS
description: IntÃ©grer Tailwind CSS v4 dans un thÃ¨me Drupal
sidebar:
  order: 4

# status: stable
# last-reviewed: 2026-01-14
---

import { Tabs, TabItem, Aside, Steps } from '@astrojs/starlight/components';

## ğŸ¨ Qu'est-ce que Tailwind CSS ?

**Tailwind CSS** est un framework CSS **utility-first** qui rÃ©volutionne la faÃ§on de styliser les interfaces web. Au lieu d'Ã©crire du CSS personnalisÃ©, vous composez vos designs directement en HTML avec des classes utilitaires.

### ğŸ†š Approche classique vs Tailwind

**CSS classique** :
```html
<!-- HTML -->
<button class="btn btn-primary">Ajouter au panier</button>

<!-- CSS sÃ©parÃ© -->
.btn {
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 600;
}
.btn-primary {
  background-color: #0073e6;
  color: white;
}
.btn-primary:hover {
  background-color: #005bb5;
}
```

**Avec Tailwind** :
```html
<!-- Tout dans le HTML -->
<button class="px-4 py-2 rounded-md font-semibold bg-blue-600 text-white hover:bg-blue-700">
  Ajouter au panier
</button>
```

### âœ… Avantages pour le projet e-commerce

| Avantage | Impact sur TailStore |
|----------|----------------------|
| **DÃ©veloppement rapide** | Prototyper des composants produit en minutes |
| **Design systÃ¨me intÃ©grÃ©** | CohÃ©rence couleurs/espacements automatique |
| **Responsive natif** | Mobile-first avec prÃ©fixes `sm:`, `md:`, `lg:` |
| **Purge CSS** | Fichier final < 10 KB (vs 200 KB avec Bootstrap) |
| **Pas de naming** | Fini les dÃ©bats sur `.product-card` vs `.item-card` |
| **Dark mode** | Support natif avec `dark:` |
| **Performance** | Aucun CSS inutilisÃ© chargÃ© |

### ğŸ†• Tailwind v4 - NouveautÃ©s majeures

<Aside type="caution" title="Migration vers Tailwind v4 - Changements importants">
**Changements clÃ©s** :
- âœ… Configuration en **CSS pur** avec `@theme` (fini `tailwind.config.js`)
- âœ… **Vite natif** : Plugin officiel `@tailwindcss/vite`
- âœ… **Performance** : Compilation 10x plus rapide
- âš ï¸ **Plus de `@apply`** : Utilisez du CSS natif avec variables CSS
- âœ… **CSS Cascade Layers** : `@layer base`, `@layer components`, `@layer utilities`
- âœ… **Variables CSS** : `var(--color-primary)` et `--spacing()` function
- âœ… **CSS Nesting** : Support natif du `&` selector
</Aside>

### ğŸ—ï¸ Architecture Tailwind + Drupal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Templates Twig (.html.twig)          â”‚
â”‚   Classes Tailwind dans le HTML         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Vite watch
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   assets/style.css                      â”‚
â”‚   @import "tailwindcss"                 â”‚
â”‚   @theme { custom vars }                â”‚
â”‚   @layer components { .btn }            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ npm run build
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   dist/assets/main.css (minified)       â”‚
â”‚   Seulement les classes utilisÃ©es       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ DÃ©clarÃ© dans .libraries.yml
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ChargÃ© dans <head> par Drupal         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ Cas d'usage dans TailStore

- ğŸ›’ **Grilles de produits** : `grid grid-cols-4 gap-6`
- ğŸ·ï¸ **Badges promo** : `badge badge-danger` (-30%)
- ğŸ” **Filtres** : Formulaires stylÃ©s avec `form-input`
- ğŸ“± **Navigation** : Menu responsive avec breakpoints
- ğŸ–¼ï¸ **Galeries images** : Lightbox avec transitions
- ğŸ’³ **Checkout** : Formulaire multi-Ã©tapes

### ğŸ†• Approche Tailwind v4 : CSS natif au lieu de @apply

**âŒ Tailwind v3 (ancienne approche)** :
```css
.btn {
  @apply px-4 py-2 bg-blue-600 text-white rounded;
}
```

**âœ… Tailwind v4 (nouvelle approche)** :
```css
.btn {
  padding-inline: --spacing(4);
  padding-block: --spacing(2);
  background-color: var(--color-blue-600);
  color: var(--color-white);
  border-radius: var(--radius);
}
```

**Avantages** :
- ğŸš€ Plus rapide (pas de transformation @apply)
- ğŸ¨ AccÃ¨s direct aux variables CSS
- ğŸ”§ Meilleure intÃ©gration avec les outils CSS
- ğŸ“¦ CSS plus petit et optimisÃ©

## ğŸš€ Installation

### 1. Initialiser npm dans le thÃ¨me

```bash
cd themes/custom/tailstore
npm init -y
```

### 2. Installer Tailwind CSS v4

```bash
npm install -D vite @tailwindcss/vite tailwindcss
```

### 3. Configurer Vite

CrÃ©ez `vite.config.js` :

```javascript
import { defineConfig } from 'vite'
import tailwindcss from '@tailwindcss/vite'

export default defineConfig({
  plugins: [
    tailwindcss(),
  ],
  build: {
    outDir: 'dist',
    rollupOptions: {
      input: {
        main: 'assets/main.js',
      },
      output: {
        entryFileNames: 'assets/[name].js',
        chunkFileNames: 'assets/[name].js',
        assetFileNames: 'assets/[name].[ext]',
      },
    },
  },
})
```

### 4. CrÃ©er le fichier CSS source

CrÃ©ez `assets/style.css` :

```css
/* assets/style.css */

/* Import Tailwind */
@import "tailwindcss";

/* Personnalisation du thÃ¨me */
@theme {
  /* Couleurs */
  --color-primary: #0073e6;
  --color-primary-dark: #005bb5;
  --color-secondary: #6c757d;
  --color-success: #28a745;
  --color-warning: #ffc107;
  --color-danger: #dc3545;
  --color-dark: #1a1a2e;
  --color-light: #f8f9fa;
  
  /* Fonts */
  --font-sans: 'Inter', system-ui, sans-serif;
  
  /* Spacing custom */
  --spacing-18: 4.5rem;
  --spacing-128: 32rem;
  
  /* Border radius */
  --radius-btn: 0.375rem;
  --radius-card: 0.5rem;
}

/* Composants personnalisÃ©s avec CSS natif (Tailwind v4) */
@layer components {
  /* Boutons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding-inline: --spacing(4);
    padding-block: --spacing(2);
    font-weight: var(--font-weight-semibold);
    border-radius: var(--radius-btn);
    transition: all 0.2s;
  }
  
  .btn-primary {
    background-color: var(--color-primary);
    color: var(--color-white);
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-primary-dark);
      }
    }
  }
  
  .btn-secondary {
    background-color: var(--color-secondary);
    color: var(--color-white);
    &:hover {
      @media (hover: hover) {
        background-color: color-mix(in srgb, var(--color-secondary) 90%, black);
      }
    }
  }
  
  .btn-outline {
    border: 1px solid currentColor;
    background-color: transparent;
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-primary);
        color: var(--color-white);
        border-color: var(--color-primary);
      }
    }
  }
  
  /* Cards */
  .card {
    background-color: var(--color-white);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-md);
    overflow: hidden;
  }
  
  .card-body {
    padding: --spacing(4);
  }
  
  /* Badges */
  .badge {
    display: inline-flex;
    align-items: center;
    padding-inline: --spacing(2);
    padding-block: --spacing(0.5);
    font-size: var(--text-xs);
    font-weight: var(--font-weight-medium);
    border-radius: calc(infinity * 1px);
  }
  
  .badge-primary {
    background-color: color-mix(in srgb, var(--color-primary) 10%, transparent);
    color: var(--color-primary);
  }
  
  .badge-danger {
    background-color: color-mix(in srgb, var(--color-danger) 10%, transparent);
    color: var(--color-danger);
  }
  
  .badge-success {
    background-color: color-mix(in srgb, var(--color-success) 10%, transparent);
    color: var(--color-success);
  }
  
  /* Formulaires */
  .form-input {
    width: 100%;
    padding-inline: --spacing(3);
    padding-block: --spacing(2);
    border: 1px solid var(--color-gray-300);
    border-radius: var(--radius-btn);
    outline: none;
    transition: colors 0.2s;
    &:focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-primary) 20%, transparent);
    }
  }
  
  .form-label {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-gray-700);
    margin-bottom: --spacing(1);
  }
  
  /* Container */
  .container {
    margin-inline: auto;
    padding-inline: --spacing(4);
    max-width: 1280px;
    @media (width >= 640px) {
      padding-inline: --spacing(6);
    }
    @media (width >= 1024px) {
      padding-inline: --spacing(8);
    }
  }
}

/* Utilitaires personnalisÃ©s */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
```

### 4. Configurer le build

CrÃ©ez `package.json` avec les scripts :

```json
{
  "name": "tailstore-theme",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "devDependencies": {
    "@tailwindcss/vite": "^4.0.0",
    "tailwindcss": "^4.0.0",
    "vite": "^5.0.0"
  }
}
```

### 5. CrÃ©er le point d'entrÃ©e JavaScript

CrÃ©ez `assets/main.js` :

```javascript
// assets/main.js
import './style.css'

// Votre code JavaScript ici
console.log('TailStore theme loaded!')
```

### 5. Builder le CSS

```bash
# DÃ©marrer le serveur de dÃ©veloppement
npm run dev

# Build production
npm run build
```

### 6. DÃ©clarer dans libraries.yml

```yaml
# tailstore.libraries.yml
global:
  version: 1.0
  css:
    theme:
      dist/assets/main-*.css: { minified: true }
  dependencies:
    - core/drupal
```

## ğŸ¯ Exercices pratiques

### Exercice 1 : Installer et tester Tailwind

**Objectif** : Configurer Tailwind v4 et vÃ©rifier que les classes fonctionnent.

<Steps>

1. Suivez toutes les Ã©tapes d'installation ci-dessus

2. CrÃ©ez un template de test `test-tailwind.html.twig` :
   ```bash
   touch themes/custom/tailstore/templates/test-tailwind.html.twig
   ```

3. Ajoutez du HTML avec des classes Tailwind :
   ```twig
   <div class="container mx-auto p-8">
     <h1 class="text-4xl font-bold text-blue-600 mb-4">
       Tailwind fonctionne ! ğŸ‰
     </h1>
     <div class="grid grid-cols-3 gap-4">
       <div class="bg-red-500 text-white p-4 rounded-lg">Rouge</div>
       <div class="bg-green-500 text-white p-4 rounded-lg">Vert</div>
       <div class="bg-blue-500 text-white p-4 rounded-lg">Bleu</div>
     </div>
   </div>
   ```

4. Lancez le build :
   ```bash
   cd themes/custom/tailstore
   npm run dev
   ```

5. Videz le cache Drupal :
   ```bash
   drush cr
   ```

6. Visitez une page et inspectez (F12) : les classes doivent Ãªtre appliquÃ©es

</Steps>

**Validation** : âœ… Le texte est bleu, les 3 boÃ®tes colorÃ©es sont visibles

---

### Exercice 2 : CrÃ©er un composant bouton

**Objectif** : Utiliser `@layer components` pour crÃ©er des boutons rÃ©utilisables.

<Steps>

1. Dans `assets/style.css`, ajoutez dans `@layer components` :
   ```css
   @layer components {
     .btn {
       display: inline-flex;
       align-items: center;
       justify-content: center;
       gap: 0.5rem;
       padding-inline: --spacing(6);
       padding-block: --spacing(3);
       font-weight: var(--font-weight-semibold);
       border-radius: var(--radius-lg);
       transition: all 0.2s;
       outline: none;
       &:focus {
         box-shadow: 0 0 0 2px var(--color-white), 0 0 0 4px currentColor;
       }
     }
     
     .btn-primary {
       background-color: var(--color-blue-600);
       color: var(--color-white);
       &:hover {
         @media (hover: hover) {
           background-color: var(--color-blue-700);
         }
       }
     }
     
     .btn-secondary {
       background-color: var(--color-gray-600);
       color: var(--color-white);
       &:hover {
         @media (hover: hover) {
           background-color: var(--color-gray-700);
         }
       }
     }
     
     .btn-outline {
       border: 2px solid var(--color-blue-600);
       color: var(--color-blue-600);
       background-color: transparent;
       &:hover {
         @media (hover: hover) {
           background-color: var(--color-blue-600);
           color: var(--color-white);
         }
       }
     }
     
     .btn-lg {
       padding-inline: --spacing(8);
       padding-block: --spacing(4);
       font-size: var(--text-lg);
     }
     
     .btn-sm {
       padding-inline: --spacing(3);
       padding-block: --spacing(1.5);
       font-size: var(--text-sm);
     }
   }
   ```

2. Testez dans un template :
   ```twig
   <div class="flex gap-4 p-8">
     <button class="btn btn-primary">Primary</button>
     <button class="btn btn-secondary">Secondary</button>
     <button class="btn btn-outline">Outline</button>
     <button class="btn btn-primary btn-lg">Large</button>
     <button class="btn btn-primary btn-sm">Small</button>
   </div>
   ```

3. Rebuilder le CSS :
   ```bash
   npm run build
   drush cr
   ```

</Steps>

**Validation** : âœ… 5 boutons avec styles diffÃ©rents, hover/focus fonctionnent

---

### Exercice 3 : Grille de produits responsive

**Objectif** : CrÃ©er une grille qui s'adapte Ã  la taille d'Ã©cran.

<Steps>

1. CrÃ©ez un template Views `views-view-unformatted--products.html.twig` :
   ```twig
   <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
     {% for row in rows %}
       {{ row.content }}
     {% endfor %}
   </div>
   ```

2. Testez la responsivitÃ© :
   - Mobile (< 640px) : 1 colonne
   - Tablette (640px+) : 2 colonnes
   - Desktop (1024px+) : 3 colonnes
   - Large (1280px+) : 4 colonnes

3. Ajoutez des espacements adaptÃ©s :
   ```twig
   <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
     <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-6">
       <!-- produits -->
     </div>
   </div>
   ```

4. Testez en redimensionnant la fenÃªtre du navigateur

</Steps>

**Validation** : âœ… La grille change de colonnes selon la taille d'Ã©cran

---

### Exercice 4 : Personnaliser le thÃ¨me avec @theme

**Objectif** : Adapter les couleurs Tailwind aux couleurs de la marque.

<Steps>

1. Dans `assets/style.css`, modifiez `@theme` :
   ```css
   @theme {
     /* Couleurs de la marque TailStore */
     --color-brand-primary: #ff6b6b;
     --color-brand-secondary: #4ecdc4;
     --color-brand-accent: #ffe66d;
     --color-brand-dark: #2d3436;
     --color-brand-light: #f8f9fa;
     
     /* Remplacer les couleurs Tailwind par dÃ©faut */
     --color-primary: var(--color-brand-primary);
     --color-secondary: var(--color-brand-secondary);
   }
   ```

2. Utilisez ces couleurs :
   ```twig
   <button class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90">
     Acheter maintenant
   </button>
   
   <div class="bg-secondary/10 border border-secondary text-secondary p-4 rounded">
     Livraison gratuite dÃ¨s 50â‚¬
   </div>
   ```

3. Testez avec diffÃ©rentes opacitÃ©s :
   ```twig
   <div class="bg-primary/10">10%</div>
   <div class="bg-primary/50">50%</div>
   <div class="bg-primary/90">90%</div>
   ```

4. Rebuilder et vÃ©rifier

</Steps>

**Validation** : âœ… Les couleurs personnalisÃ©es sont appliquÃ©es partout

## ğŸ§  Bonnes pratiques essentielles

### âš¡ Performance

**1. Purge automatique - VÃ©rifier la configuration**

Tailwind v4 purge automatiquement, mais vÃ©rifiez que tous vos templates sont scannÃ©s :

```javascript
// vite.config.js
export default defineConfig({
  plugins: [
    tailwindcss({
      // SpÃ©cifier oÃ¹ chercher les classes
      content: [
        './templates/**/*.twig',
        './templates/**/*.html.twig',
        './src/**/*.php',
      ],
    }),
  ],
})
```

**2. Ã‰viter les classes dynamiques**

```twig
{# âŒ Mauvais - Classe gÃ©nÃ©rÃ©e dynamiquement #}
<div class="text-{{ color }}">  {# Ne fonctionnera pas avec la purge #}

{# âœ… Bon - Mapper vers des classes complÃ¨tes #}
{% set color_classes = {
  'red': 'text-red-600',
  'blue': 'text-blue-600',
  'green': 'text-green-600',
} %}
<div class="{{ color_classes[color] }}">
```

**3. Utiliser les composants pour les styles complexes**

```css
/* Au lieu de rÃ©pÃ©ter dans chaque template */
@layer components {
  .product-card {
    background-color: var(--color-white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    transition: all 0.2s;
    &:hover {
      @media (hover: hover) {
        transform: translateY(-0.25rem);
        box-shadow: var(--shadow-xl);
      }
    }
  }
  
  .product-card-image {
    aspect-ratio: 1;
    overflow: hidden;
  }
  
  .product-card-body {
    padding: --spacing(4);
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
}
```

**4. Optimiser les builds**

```bash
# DÃ©veloppement - rebuild rapide
npm run dev

# Production - minification maximale
npm run build

# VÃ©rifier la taille finale
ls -lh dist/assets/*.css
# Attendu : < 15 KB aprÃ¨s gzip
```

<Aside type="tip" title="Impact performance">
**Sans Tailwind** : Bootstrap = 150 KB CSS  
**Avec Tailwind + purge** : 8-12 KB CSS  

ğŸš€ **Gain** : 93% de taille en moins !
</Aside>

### ğŸ¨ Conventions de code

**1. Ordre des classes (recommandÃ©)**

Utilisez Prettier avec le plugin Tailwind pour trier automatiquement :

```bash
npm install -D prettier prettier-plugin-tailwindcss
```

```json
// .prettierrc
{
  "plugins": ["prettier-plugin-tailwindcss"]
}
```

**Ordre logique** : Layout â†’ Spacing â†’ Sizing â†’ Typography â†’ Colors â†’ Effects

```twig
<button class="
  flex items-center justify-center    {# Layout #}
  px-6 py-3 gap-2                     {# Spacing #}
  w-full                              {# Sizing #}
  text-lg font-semibold               {# Typography #}
  bg-blue-600 text-white              {# Colors #}
  rounded-lg shadow-md                {# Effects #}
  hover:bg-blue-700 hover:shadow-lg   {# States #}
  transition-all duration-200         {# Transitions #}
">
  Ajouter au panier
</button>
```

**2. Composants vs Utilitaires**

```css
/* CrÃ©er un composant SI rÃ©pÃ©tÃ© 3+ fois */
@layer components {
  .badge {
    @apply inline-flex items-center px-2 py-0.5;
    @apply text-xs font-medium rounded-full;
  }
  
  .badge-primary {
    @apply bg-blue-100 text-blue-800;
  }
}
```

```twig
{# Utiliser directement les utilitaires pour des cas uniques #}
<div class="flex items-center justify-between p-4 bg-gray-50 rounded">
  <!-- Contenu unique -->
</div>
```

**3. Responsive - Mobile First**

```twig
{# âŒ Mauvais - Desktop first #}
<div class="grid-cols-4 md:grid-cols-2 sm:grid-cols-1">

{# âœ… Bon - Mobile first #}
<div class="grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
  {# Mobile: 1 col, Tablet: 2 col, Desktop: 3 col, Large: 4 col #}
</div>
```

### â™¿ AccessibilitÃ©

**1. Focus visible**

```twig
<button class="
  btn btn-primary
  focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
  focus:outline-none
">
  Action
</button>
```

**2. Contraste des couleurs**

```css
/* VÃ©rifier le contraste (WCAG AA = 4.5:1) */
@layer components {
  .btn-primary {
    @apply bg-blue-600 text-white;  /* Contraste: 8.6:1 âœ… */
  }
  
  .text-muted {
    @apply text-gray-600;  /* Sur fond blanc: 5.7:1 âœ… */
  }
}
```

**3. Textes alternatifs et aria**

```twig
{# IcÃ´nes avec texte cachÃ© #}
<button class="btn btn-primary">
  <svg class="w-5 h-5" aria-hidden="true">...</svg>
  <span class="sr-only">Ajouter au panier</span>
</button>

{# sr-only = screen reader only #}
```

```css
/* Classe sr-only intÃ©grÃ©e dans Tailwind */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  clip: rect(0, 0, 0, 0);
}
```

### ğŸ”„ Maintenance

**1. Documenter les composants personnalisÃ©s**

```css
/**
 * Product Card Component
 * 
 * Usage:
 * <article class="product-card">
 *   <img class="product-card-image" />
 *   <div class="product-card-body">...</div>
 * </article>
 * 
 * Variants: .product-card-featured, .product-card-compact
 */
@layer components {
  .product-card { /* ... */ }
}
```

**2. Versionner les couleurs**

```css
@theme {
  /* Version 1.0 - Couleurs initiales */
  --color-primary-v1: #0073e6;
  
  /* Version 2.0 - Nouveau branding (2026-01) */
  --color-primary: #ff6b6b;
  --color-primary-dark: #e85a5a;
  --color-primary-light: #ff8787;
}
```

## ğŸ“„ IntÃ©gration avec les templates

### Template page.html.twig avec Tailwind

```twig
{#
/**
 * @file
 * TailStore page template with Tailwind CSS.
 */
#}
<div class="min-h-screen flex flex-col bg-light">
  
  {# Header #}
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="container">
      <div class="flex items-center justify-between h-16">
        
        {# Logo #}
        <div class="flex-shrink-0">
          {{ page.header }}
        </div>
        
        {# Navigation principale #}
        <nav class="hidden md:flex items-center space-x-8">
          {{ page.primary_menu }}
        </nav>
        
        {# Actions header #}
        <div class="flex items-center space-x-4">
          {{ page.secondary_menu }}
          
          {# Mobile menu button #}
          <button 
            type="button" 
            class="md:hidden p-2 text-gray-600 hover:text-primary"
            x-data
            @click="$dispatch('toggle-mobile-menu')"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
          </button>
        </div>
        
      </div>
    </div>
  </header>

  {# Hero/Highlighted #}
  {% if page.highlighted %}
    <section class="relative">
      {{ page.highlighted }}
    </section>
  {% endif %}

  {# Breadcrumb #}
  {% if page.breadcrumb %}
    <nav class="bg-gray-50 border-b" aria-label="Breadcrumb">
      <div class="container py-3">
        {{ page.breadcrumb }}
      </div>
    </nav>
  {% endif %}

  {# Main content #}
  <main class="flex-grow py-8" id="main-content">
    <div class="container">
      
      {{ page.help }}
      
      <div class="{% if page.sidebar %}grid lg:grid-cols-4 gap-8{% endif %}">
        
        {# Content #}
        <div class="{% if page.sidebar %}lg:col-span-3{% endif %}">
          {{ page.content }}
        </div>
        
        {# Sidebar #}
        {% if page.sidebar %}
          <aside class="lg:col-span-1 space-y-6">
            {{ page.sidebar }}
          </aside>
        {% endif %}
        
      </div>
      
      {% if page.content_below %}
        <div class="mt-12">
          {{ page.content_below }}
        </div>
      {% endif %}
      
    </div>
  </main>

  {# Footer #}
  <footer class="bg-dark text-white">
    {% if page.footer_top %}
      <div class="container py-12">
        <div class="grid md:grid-cols-4 gap-8">
          {{ page.footer_top }}
        </div>
      </div>
    {% endif %}
    
    {% if page.footer_bottom %}
      <div class="border-t border-white/10">
        <div class="container py-6">
          <div class="flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-gray-400">
            {{ page.footer_bottom }}
          </div>
        </div>
      </div>
    {% endif %}
  </footer>

</div>
```

### Template Product Card avec Tailwind

```twig
{#
/**
 * @file
 * Product card template with Tailwind CSS.
 */
#}
<article class="group card hover:-translate-y-1 transition-transform duration-200">
  
  {# Badges #}
  <div class="absolute top-2 left-2 z-10 flex gap-1">
    {% if is_on_sale %}
      <span class="badge badge-danger">-{{ discount_percent }}%</span>
    {% endif %}
    {% if node.isPromoted() %}
      <span class="badge badge-primary">Nouveau</span>
    {% endif %}
  </div>
  
  {# Quick actions #}
  <div class="absolute top-2 right-2 z-10 flex flex-col gap-1 opacity-0 translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200">
    <button class="w-8 h-8 bg-white rounded-full shadow flex items-center justify-center text-gray-600 hover:text-primary hover:scale-110 transition-transform">
      â™¡
    </button>
    <button class="w-8 h-8 bg-white rounded-full shadow flex items-center justify-center text-gray-600 hover:text-primary hover:scale-110 transition-transform">
      ğŸ‘
    </button>
  </div>
  
  {# Image #}
  <a href="{{ url }}" class="block aspect-square overflow-hidden">
    {% if content.field_images.0 %}
      <img 
        src="{{ file_url(node.field_images.0.entity.fileuri) }}"
        alt="{{ node.field_images.0.alt }}"
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
      >
    {% else %}
      <div class="w-full h-full bg-gray-100 flex items-center justify-center text-gray-400">
        No image
      </div>
    {% endif %}
  </a>
  
  {# Info #}
  <div class="card-body flex flex-col">
    
    {# Brand #}
    {% if node.field_brand.entity %}
      <span class="text-xs uppercase tracking-wider text-gray-500">
        {{ node.field_brand.entity.label }}
      </span>
    {% endif %}
    
    {# Title #}
    <h3 class="font-semibold text-gray-900 line-clamp-2 mt-1">
      <a href="{{ url }}" class="hover:text-primary transition-colors">
        {{ label }}
      </a>
    </h3>
    
    {# Price #}
    <div class="mt-auto pt-2">
      {% if is_on_sale and old_price %}
        <span class="text-sm text-gray-500 line-through mr-2">{{ old_price }}</span>
        <span class="text-lg font-bold text-danger">{{ formatted_price }}</span>
      {% else %}
        <span class="text-lg font-bold text-gray-900">{{ formatted_price }}</span>
      {% endif %}
    </div>
    
    {# Colors #}
    {% if node.field_colors|length > 0 %}
      <div class="flex gap-1 mt-2">
        {% for color in node.field_colors|slice(0, 5) %}
          <span 
            class="w-4 h-4 rounded-full border border-gray-200"
            style="background-color: {{ color.entity.field_color_code.value }}"
            title="{{ color.entity.label }}"
          ></span>
        {% endfor %}
        {% if node.field_colors|length > 5 %}
          <span class="text-xs text-gray-500 self-center">+{{ node.field_colors|length - 5 }}</span>
        {% endif %}
      </div>
    {% endif %}
    
  </div>
  
  {# Add to cart button #}
  <div class="p-4 pt-0">
    <button 
      class="btn btn-primary w-full"
      data-product-id="{{ node.id }}"
      {% if not in_stock %}disabled{% endif %}
    >
      {% if in_stock %}
        Ajouter au panier
      {% else %}
        Indisponible
      {% endif %}
    </button>
  </div>
  
</article>
```

## âš™ï¸ Workflow de dÃ©veloppement

### Mode dÃ©veloppement

<Tabs>
<TabItem label="Terminal 1 - Tailwind">

```bash
cd themes/custom/tailstore
npm run watch
```

</TabItem>
<TabItem label="Terminal 2 - DDEV">

```bash
ddev drush cr  # AprÃ¨s modification des templates
```

</TabItem>
</Tabs>

### Mode production

```bash
# Build minifiÃ©
npm run build

# VÃ©rifier la taille
ls -lh dist/assets/
```

## ğŸ”§ IntÃ©gration avec le formulaire exposÃ© Views

```twig
{# views-exposed-form.html.twig #}
<form{{ attributes.addClass('flex flex-wrap gap-4 p-4 bg-gray-50 rounded-lg mb-8') }}>
  
  {% for element in form %}
    {% if element['#type'] is defined and element['#type'] != 'hidden' %}
      <div class="flex-1 min-w-[150px]">
        {% if element['#title'] %}
          <label class="form-label">{{ element['#title'] }}</label>
        {% endif %}
        {{ element|merge({'#attributes': {'class': ['form-input']}}) }}
      </div>
    {% endif %}
  {% endfor %}
  
  <div class="flex gap-2 items-end">
    <button type="submit" class="btn btn-primary">
      Filtrer
    </button>
    {% if form['#info'] is defined and form['#info']['filter'] is defined %}
      <a href="{{ path('<current>') }}" class="btn btn-outline">
        RÃ©initialiser
      </a>
    {% endif %}
  </div>
  
</form>
```

## ğŸ“¦ Optimisation production

### Purge CSS

Tailwind v4 purge automatiquement les classes non utilisÃ©es. Assurez-vous que tous les templates sont listÃ©s dans `content`.

### VÃ©rifier les classes dynamiques

Si vous gÃ©nÃ©rez des classes dynamiquement, utilisez la syntaxe complÃ¨te :

```twig
{# âŒ Ne fonctionne pas - classe coupÃ©e #}
<div class="bg-{{ color }}">

{# âœ… Fonctionne - classe complÃ¨te dans le code #}
{% set color_classes = {
  'red': 'bg-red-500',
  'blue': 'bg-blue-500',
  'green': 'bg-green-500',
} %}
<div class="{{ color_classes[color] }}">
```

### Classes dynamiques avec Tailwind v4

Pour les classes gÃ©nÃ©rÃ©es dynamiquement, utilisez des noms de classes complets plutÃ´t que des concatÃ©nations. Si vous avez besoin de classes vraiment dynamiques, considÃ©rez l'approche des variants safelist dans votre fichier CSS avec `@theme`.

## âœ… Checklist de validation

### Installation et configuration

<Steps>

1. **VÃ©rifier l'installation des dÃ©pendances**
   ```bash
   cd themes/custom/tailstore
   ls node_modules/@tailwindcss/vite node_modules/vite node_modules/tailwindcss
   ```
   **Attendu** : Les 3 dossiers existent

2. **VÃ©rifier vite.config.js**
   ```bash
   cat vite.config.js | grep "@tailwindcss/vite"
   ```
   **Attendu** : `import tailwindcss from '@tailwindcss/vite'`

3. **VÃ©rifier assets/style.css**
   ```bash
   cat assets/style.css | head -5
   ```
   **Attendu** : `@import "tailwindcss";` prÃ©sent

4. **Tester le build**
   ```bash
   npm run build
   ls -lh dist/assets/
   ```
   **Attendu** : Fichier `main-*.css` crÃ©Ã© (< 20 KB)

5. **VÃ©rifier la librairie Drupal**
   ```bash
   cat tailstore.libraries.yml | grep -A 5 "global:"
   ```
   **Attendu** : RÃ©fÃ©rence Ã  `dist/assets/main-*.css`

6. **Tester dans le navigateur**
   ```bash
   drush cr
   # Ouvrir une page, F12 â†’ Network â†’ Filtrer "css"
   ```
   **Attendu** : Le fichier CSS Tailwind est chargÃ© (200 OK)

7. **VÃ©rifier les classes appliquÃ©es**
   - Inspecter un Ã©lÃ©ment (F12)
   - Chercher une classe Tailwind (ex: `bg-blue-600`)
   **Attendu** : Les styles sont appliquÃ©s

</Steps>

### Tests fonctionnels

- [ ] Les classes Tailwind sont appliquÃ©es (couleurs, espacements)
- [ ] Les composants personnalisÃ©s fonctionnent (`.btn`, `.card`)
- [ ] Le responsive fonctionne (tester mobile, tablette, desktop)
- [ ] Les variables `@theme` sont accessibles
- [ ] Le mode watch fonctionne (`npm run dev`)
- [ ] Le build production est optimisÃ© (< 15 KB aprÃ¨s gzip)
- [ ] Pas de classes inutilisÃ©es dans le CSS final
- [ ] Les templates Twig utilisent les classes Tailwind

### Performance

- [ ] Taille CSS production < 15 KB
- [ ] Temps de build < 2 secondes
- [ ] Hot Module Replacement (HMR) fonctionne en dev
- [ ] Aucune erreur console liÃ©e aux styles

### Script de validation complet

```bash
#!/bin/bash

echo "=== Validation Tailwind CSS ==="

cd themes/custom/tailstore

# 1. VÃ©rifier l'installation
echo "\nğŸ“¦ DÃ©pendances :"
npm list @tailwindcss/vite tailwindcss vite 2>&1 | grep -E "@tailwindcss|tailwindcss@|vite@"

# 2. VÃ©rifier la config
echo "\nâš™ï¸ Configuration :"
if [ -f "vite.config.js" ]; then
  echo "âœ… vite.config.js existe"
else
  echo "âŒ vite.config.js manquant"
fi

# 3. VÃ©rifier le CSS source
echo "\nğŸ¨ Fichier CSS source :"
if grep -q "@import.*tailwindcss" assets/style.css 2>/dev/null; then
  echo "âœ… @import tailwindcss trouvÃ©"
else
  echo "âŒ @import tailwindcss manquant"
fi

# 4. Build et vÃ©rifier la taille
echo "\nğŸ—ï¸ Build production :"
npm run build > /dev/null 2>&1
if [ -d "dist/assets" ]; then
  echo "âœ… Build rÃ©ussi"
  ls -lh dist/assets/*.css | awk '{print "   Taille: " $5}'
else
  echo "âŒ Build Ã©chouÃ©"
fi

# 5. VÃ©rifier la dÃ©claration Drupal
echo "\nğŸ“š Librairie Drupal :"
if grep -q "dist/assets" tailstore.libraries.yml 2>/dev/null; then
  echo "âœ… Librairie dÃ©clarÃ©e"
else
  echo "âŒ Librairie non dÃ©clarÃ©e"
fi

echo "\nâœ… Validation terminÃ©e"
```

**Temps estimÃ© total** : 2-3 heures pour configuration + conversion des premiers templates

## ğŸš¨ Erreurs courantes et solutions

### Erreur 1 : "Cannot find module '@tailwindcss/vite'"

**SymptÃ´me** : Erreur au lancement de `npm run dev`

**Cause** : DÃ©pendances non installÃ©es

**Solution** :
```bash
cd themes/custom/tailstore
rm -rf node_modules package-lock.json
npm install
```

### Erreur 2 : Classes Tailwind non appliquÃ©es

**SymptÃ´me** : Le CSS est chargÃ© mais les classes ne fonctionnent pas

**Cause** : CSS non rebuilder aprÃ¨s modification des templates

**Solution** :
```bash
# 1. Rebuilder le CSS
npm run build

# 2. Vider le cache Drupal
drush cr

# 3. Vider le cache navigateur (Ctrl+Shift+R)
```

### Erreur 3 : Fichier CSS trop volumineux (> 50 KB)

**SymptÃ´me** : Le fichier `dist/assets/main-*.css` fait plus de 50 KB

**Cause** : La purge ne fonctionne pas correctement

**Solution** :
```javascript
// vite.config.js - SpÃ©cifier les fichiers Ã  scanner
export default defineConfig({
  plugins: [
    tailwindcss({
      content: [
        './templates/**/*.twig',
        './templates/**/*.html.twig',
      ],
    }),
  ],
})
```

```bash
# Rebuilder
npm run build
ls -lh dist/assets/main-*.css
```

### Erreur 4 : "Failed to load config from vite.config.js"

**SymptÃ´me** : Erreur de syntaxe dans vite.config.js

**Cause** : Import incorrect ou syntaxe invalide

**Solution** :
```javascript
// âŒ Mauvais
import tailwindcss from '@tailwindcss/vite'
export default {
  plugins: [tailwindcss()],
}

// âœ… Bon
import { defineConfig } from 'vite'
import tailwindcss from '@tailwindcss/vite'

export default defineConfig({
  plugins: [tailwindcss()],
  build: {
    outDir: 'dist',
  },
})
```

### Erreur 5 : Classes dynamiques purgÃ©es

**SymptÃ´me** : Classe gÃ©nÃ©rÃ©e dynamiquement ne fonctionne pas

**Cause** : Tailwind ne voit pas la classe complÃ¨te dans le code

**Solution** :
```twig
{# âŒ Ne fonctionne pas - classe dynamique #}
<div class="bg-{{ color }}-500">

{# âœ… Fonctionne - mapping explicite #}
{% set color_map = {
  'red': 'bg-red-500',
  'blue': 'bg-blue-500',
  'green': 'bg-green-500',
} %}
<div class="{{ color_map[color] }}">

{# Ou utiliser style inline pour les couleurs vraiment dynamiques #}
<div style="background-color: {{ color }};">
```

### Erreur 6 : HMR (Hot reload) ne fonctionne pas

**SymptÃ´me** : Modifications CSS non visibles en temps rÃ©el

**Cause** : Vite dev server non lancÃ©

**Solution** :
```bash
# Terminal 1 : Vite watch
cd themes/custom/tailstore
npm run dev

# Terminal 2 : DDEV (Drupal)
ddev start

# Les modifications CSS sont maintenant instantanÃ©es
```

### Erreur 7 : "@theme is not defined"

**SymptÃ´me** : Erreur de parsing CSS

**Cause** : Mauvaise syntaxe dans `@theme`

**Solution** :
```css
/* âŒ Mauvais */
@theme {
  color-primary: #0073e6;  /* Manque -- */
}

/* âœ… Bon */
@theme {
  --color-primary: #0073e6;
  --color-secondary: #6c757d;
}
```

<Aside type="tip" title="DÃ©bogage avancÃ©">
**Voir le CSS gÃ©nÃ©rÃ©** :
```bash
# Ouvrir le fichier compilÃ©
cat dist/assets/main-*.css | less

# Chercher une classe spÃ©cifique
cat dist/assets/main-*.css | grep "bg-blue-600"
```

**Voir les classes dÃ©tectÃ©es** :
```bash
# Lancer en mode verbose
npm run build -- --mode development
```
</Aside>

## ğŸ“š Ressources complÃ©mentaires

### Documentation officielle

- [Tailwind CSS v4](https://tailwindcss.com/docs) - Documentation complÃ¨te
- [Vite Plugin](https://tailwindcss.com/docs/installation/vite) - IntÃ©gration Vite
- [Customization](https://tailwindcss.com/docs/theme) - Personnalisation @theme
- [Responsive Design](https://tailwindcss.com/docs/responsive-design) - Breakpoints
- [Utility-First](https://tailwindcss.com/docs/utility-first) - Philosophie

### Outils recommandÃ©s

- **Tailwind CSS IntelliSense** (VS Code) : AutocomplÃ©tion des classes
- **Headwind** (VS Code) : Tri automatique des classes
- **Prettier + plugin Tailwind** : Formatage cohÃ©rent
- **Tailwind Play** : Playground en ligne pour tester

### Ressources UI

- [Tailwind UI](https://tailwindui.com/) - Composants officiels (payant)
- [Flowbite](https://flowbite.com/) - Composants open-source
- [daisyUI](https://daisyui.com/) - Composants Tailwind
- [Headless UI](https://headlessui.com/) - Composants accessibles sans styles

### Exemples e-commerce

- [E-commerce Template](https://tailwindui.com/templates/commit) - Template complet
- [Product Cards](https://tailwindcomponents.com/components/e-commerce) - Exemples cartes produits

## ğŸ”œ Prochaine Ã©tape

Tailwind est intÃ©grÃ© ! Ajoutons maintenant [Alpine.js](/etape-6-theming/alpinejs/) pour les interactions.
