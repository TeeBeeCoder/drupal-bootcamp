---
title: Environnement DDEV
description: Installer et configurer DDEV pour le dÃ©veloppement Drupal 11
sidebar:
  order: 1

# status: draft
# last-reviewed: 2025-12-10
---

import { Tabs, TabItem, Steps } from '@astrojs/starlight/components';

DDEV est un outil de dÃ©veloppement local basÃ© sur Docker. Il crÃ©e des environnements isolÃ©s et reproductibles, parfaits pour le dÃ©veloppement Drupal.

## ğŸ”§ PrÃ©requis DDEV

### 1. Docker

DDEV nÃ©cessite Docker pour fonctionner.

<Tabs>
  <TabItem label="macOS">
    ```bash
    # Installer Docker Desktop
    brew install --cask docker
    
    # OU tÃ©lÃ©charger depuis https://www.docker.com/products/docker-desktop
    
    # Lancer Docker Desktop et attendre qu'il soit prÃªt
    # L'icÃ´ne Docker doit Ãªtre stable dans la barre de menu
    ```
  </TabItem>
  <TabItem label="Windows">
    1. Activer WSL2 (Windows Subsystem for Linux 2)
    2. TÃ©lÃ©charger [Docker Desktop pour Windows](https://www.docker.com/products/docker-desktop)
    3. Installer et redÃ©marrer
    4. Configurer Docker pour utiliser WSL2 dans les paramÃ¨tres
  </TabItem>
  <TabItem label="Linux">
    ```bash
    # Ubuntu/Debian
    sudo apt-get update
    sudo apt-get install docker.io docker-compose-plugin
    sudo systemctl start docker
    sudo systemctl enable docker
    
    # Ajouter votre utilisateur au groupe docker
    sudo usermod -aG docker $USER
    # DÃ©connectez-vous et reconnectez-vous
    ```
  </TabItem>
</Tabs>

### 2. Installer DDEV

<Tabs>
  <TabItem label="macOS">
    ```bash
    # Avec Homebrew
    brew install ddev/ddev/ddev
    
    # Configurer le provider DNS
    mkcert -install
    ```
  </TabItem>
  <TabItem label="Windows">
    ```powershell
    # Avec Chocolatey (en tant qu'administrateur)
    choco install ddev
    
    # OU avec l'installateur
    # TÃ©lÃ©charger depuis https://github.com/ddev/ddev/releases
    ```
  </TabItem>
  <TabItem label="Linux">
    ```bash
    # Script d'installation officiel
    curl -fsSL https://raw.githubusercontent.com/ddev/ddev/master/scripts/install_ddev.sh | bash
    
    # Installer mkcert pour HTTPS local
    mkcert -install
    ```
  </TabItem>
</Tabs>

### 3. VÃ©rifier l'installation

```bash
ddev version
```

Vous devriez voir quelque chose comme :

```
DDEV version v1.23.x
docker version 24.x.x
docker-compose version v2.x.x
```

## ğŸš€ CrÃ©er un projet Drupal avec DDEV

<Steps>

1. **CrÃ©er le dossier du projet**

   ```bash
   mkdir tailstore
   cd tailstore
   ```

2. **Configurer DDEV**

   ```bash
   ddev config --project-type=drupal --php-version=8.4 --docroot=web
   ```

   Cette commande crÃ©e un fichier `.ddev/config.yaml` avec :
   - Type de projet : Drupal
   - Version PHP : 8.4
   - Racine web : `web/`

3. **DÃ©marrer l'environnement**

   ```bash
   ddev start
   ```

   DDEV va :
   - TÃ©lÃ©charger les images Docker nÃ©cessaires
   - CrÃ©er les conteneurs (web, db)
   - Configurer le rÃ©seau
   - GÃ©nÃ©rer les certificats HTTPS

   :::tip[PremiÃ¨re exÃ©cution]
   La premiÃ¨re fois, le tÃ©lÃ©chargement des images peut prendre quelques minutes.
   :::

4. **CrÃ©er le projet Drupal**

   ```bash
   ddev composer create drupal/recommended-project:^11.0 --no-install
   ddev composer install
   ```

5. **Installer Drupal**

   ```bash
   ddev drush site:install standard \
     --site-name="TailStore" \
     --account-name=admin \
     --account-pass=admin \
     --locale=fr \
     -y
   ```

   :::caution[Notez vos identifiants]
   - **Utilisateur** : admin
   - **Mot de passe** : admin
   :::

6. **Ouvrir le site**

   ```bash
   ddev launch
   ```

   Votre navigateur s'ouvre sur `https://tailstore.ddev.site`

</Steps>

## ğŸ“ Structure du projet avec DDEV

AprÃ¨s l'installation, votre projet ressemble Ã  :

```
tailstore/
â”œâ”€â”€ .ddev/
â”‚   â”œâ”€â”€ config.yaml          # Configuration DDEV
â”‚   â”œâ”€â”€ docker-compose*.yaml # Configuration Docker
â”‚   â””â”€â”€ commands/             # Commandes personnalisÃ©es
â”œâ”€â”€ web/                      # Racine web Drupal
â”‚   â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ themes/
â”‚   â””â”€â”€ sites/
â”œâ”€â”€ vendor/                   # DÃ©pendances PHP
â”œâ”€â”€ composer.json
â”œâ”€â”€ composer.lock
â””â”€â”€ .gitignore
```

## âŒ¨ï¸ Commandes DDEV essentielles

| Commande | Description |
|----------|-------------|
| `ddev start` | DÃ©marrer les conteneurs |
| `ddev stop` | ArrÃªter les conteneurs |
| `ddev restart` | RedÃ©marrer |
| `ddev poweroff` | ArrÃªter tous les projets DDEV |
| `ddev describe` | Afficher les infos du projet |
| `ddev launch` | Ouvrir le site dans le navigateur |
| `ddev ssh` | AccÃ©der au conteneur web |
| `ddev composer <cmd>` | ExÃ©cuter Composer |
| `ddev drush <cmd>` | ExÃ©cuter Drush |
| `ddev logs` | Voir les logs |
| `ddev import-db` | Importer une base de donnÃ©es |
| `ddev export-db` | Exporter la base de donnÃ©es |

## ğŸ”§ Configuration avancÃ©e DDEV

### Fichier .ddev/config.yaml

```yaml
name: tailstore
type: drupal
docroot: web
php_version: "8.4"
webserver_type: nginx-fpm
database:
  type: mariadb
  version: "10.11"

# Hooks personnalisÃ©s
hooks:
  post-start:
    - exec: drush cr
```

### Ajouter des services

```bash
# Ajouter phpMyAdmin
ddev get ddev/ddev-phpmyadmin

# Ajouter Mailpit (capture des emails)
ddev get ddev/ddev-mailpit

# RedÃ©marrer pour appliquer
ddev restart
```

### Variables d'environnement

CrÃ©er `.ddev/.env` :

```bash
# Variables personnalisÃ©es
STRIPE_PUBLIC_KEY=pk_test_xxxxx
STRIPE_SECRET_KEY=sk_test_xxxxx
```

## ğŸ› RÃ©solution de problÃ¨mes

### Port dÃ©jÃ  utilisÃ©

```bash
# Changer le port HTTP
ddev config --http-port=8080

# Ou arrÃªter le service utilisant le port 80
sudo lsof -i :80
```

### ProblÃ¨me de certificat

```bash
mkcert -install
ddev restart
```

### Conteneur qui ne dÃ©marre pas

```bash
# Reconstruire les conteneurs
ddev delete -O
ddev start
```

### Logs pour debug

```bash
# Logs du serveur web
ddev logs -f

# Logs spÃ©cifiques
ddev logs -s web
ddev logs -s db
```

## âœ… VÃ©rification

Votre installation est rÃ©ussie si :

- [ ] `ddev describe` affiche les URLs du projet
- [ ] `ddev launch` ouvre votre site Drupal
- [ ] Vous pouvez vous connecter avec admin/admin
- [ ] L'interface est en franÃ§ais

## ğŸš€ Ã‰tape suivante

Passez Ã  l'[Installation avec Composer](/etape-1-installation/installation-composer/) pour comprendre la gestion des dÃ©pendances.

Ou si vous prÃ©fÃ©rez XAMPP, consultez [Environnement XAMPP](/etape-1-installation/environnement-xampp/).
