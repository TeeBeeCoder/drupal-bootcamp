---
title: Types de contenu
description: Comprendre et crÃ©er des types de contenu dans Drupal 11
sidebar:
  order: 1

# status: stable
# last-reviewed: 2025-12-10
---

import { Steps, Tabs, TabItem } from '@astrojs/starlight/components';

Les **types de contenu** (content types ou node types) sont la base de la modÃ©lisation dans Drupal. Chaque type dÃ©finit une structure de donnÃ©es rÃ©utilisable.

## ğŸ¤” Qu'est-ce qu'un type de contenu ?

Un type de contenu est un **modÃ¨le** pour crÃ©er du contenu. Il dÃ©finit :

- Les **champs** disponibles (titre, image, prix...)
- Les **paramÃ¨tres** de publication
- Les **modes d'affichage**
- Les **permissions** associÃ©es

### Exemples concrets

| Type de contenu | Utilisation |
|-----------------|-------------|
| Article | ActualitÃ©s, blog |
| Page | Pages statiques |
| Produit | Articles Ã  vendre |
| Ã‰vÃ©nement | Calendrier |
| TÃ©moignage | Avis clients |

### Types par dÃ©faut dans Drupal

Drupal installe deux types par dÃ©faut :

- **Article** : Pour les contenus chronologiques (blog, actualitÃ©s)
- **Page de base** : Pour les pages statiques (Ã€ propos, Contact)

## ğŸ“ Conventions de nommage importantes

:::danger[Machine names en anglais obligatoire]

**RÃˆGLE ABSOLUE** : Tous les **machine names** (noms systÃ¨me) dans Drupal doivent Ãªtre en **anglais**.

**Pourquoi ?**
- Drupal est un CMS international
- Les dÃ©veloppeurs du monde entier utilisent l'anglais
- Cela limite les accents et caractÃ¨res spÃ©ciaux dans les noms de machine
- Cela facilite le partage de code et de configurations

**Comment Ã§a marche :**
1. Le **nom d'affichage** peut Ãªtre en franÃ§ais : "Produit", "Article de Blog"
2. Drupal gÃ©nÃ¨re automatiquement un **machine name** Ã  partir du nom
3. **Vous DEVEZ corriger ce machine name** s'il n'est pas en anglais

:::

### Exemples de correction

| Nom d'affichage | Machine name gÃ©nÃ©rÃ© | Machine name correct |
|----------------|-------------------|---------------------|
| Produit | `produit` âŒ | `product` âœ… |
| Article de Blog | `article_de_blog` âŒ | `blog_article` âœ… |
| Slide | `slide` âœ… | `slide` âœ… |
| TÃ©moignage | `tÃ©moignage` âŒ | `testimonial` âœ… |

:::tip[Comment corriger le machine name]

Quand Drupal gÃ©nÃ¨re automatiquement un machine name incorrect :

1. **VÃ©rifiez toujours** le champ "Nom systÃ¨me" (machine name)
2. **Corrigez-le** si nÃ©cessaire (minuscules, anglais, pas d'accents)
3. **Relisez-vous** avant de sauvegarder

**Exemple concret :**
- Vous tapez "Produit" comme nom
- Drupal propose `produit` comme machine name
- **Changez-le immÃ©diatement** en `product`

:::

## ğŸ—ï¸ CrÃ©er un type de contenu

### Via l'interface

<Steps>

1. Aller Ã  **Structure** > **Types de contenu** (`/admin/structure/types`)

2. Cliquer sur **Ajouter un type de contenu**

3. Remplir les informations de base :
   - **Nom** : Produit
   - **Nom systÃ¨me** (machine name) : `product` (gÃ©nÃ©rÃ© automatiquement - **corrigez si nÃ©cessaire**)
   - **Description** : Articles de la boutique TailStore

4. Configurer les **paramÃ¨tres de soumission** :
   - Instructions de soumission (optionnel)
   - AperÃ§u avant envoi : Optionnel

5. Configurer les **paramÃ¨tres de publication** :
   - [x] PubliÃ© (par dÃ©faut)
   - [ ] Promu en page d'accueil
   - [ ] Ã‰pinglÃ© en haut des listes

6. Configurer les **paramÃ¨tres d'affichage** :
   - [ ] Afficher les informations de l'auteur
   - [ ] Afficher la date de publication

7. Configurer les **options de menu** :
   - Menus disponibles : (selon besoin)

8. Cliquer sur **Enregistrer et gÃ©rer les champs**

</Steps>

:::warning[Important]
N'oubliez pas de **corriger le machine name** si Drupal gÃ©nÃ¨re un nom franÃ§ais !
:::

### Configuration YAML

AprÃ¨s crÃ©ation, le fichier `config/sync/node.type.product.yml` ressemble Ã  :

```yaml
langcode: fr
status: true
dependencies: {  }
name: Produit
type: product
description: 'Articles de la boutique TailStore'
help: ''
new_revision: true
preview_mode: 1
display_submitted: false
```

## ğŸ›ï¸ CrÃ©er le type "Produit"

CrÃ©ons le type de contenu principal de TailStore :

<Steps>

1. **AccÃ©der Ã  la crÃ©ation**
   
   `/admin/structure/types/add`

2. **Informations de base**
   
   | Champ | Valeur |
   |-------|--------|
   | Nom | Produit |
   | Nom systÃ¨me (Machine name) | product |
   | Description | Articles de la boutique TailStore |

3. **ParamÃ¨tres de publication**
   
   - âœ… PubliÃ©
   - âŒ Promu en page d'accueil
   - âœ… CrÃ©er une nouvelle rÃ©vision

4. **ParamÃ¨tres d'affichage**
   
   - âŒ Afficher les informations de l'auteur
   - âŒ Afficher la date de publication

5. **Enregistrer**

</Steps>

## ğŸ“ CrÃ©er le type "Article de Blog"

<Steps>

1. **AccÃ©der Ã  la crÃ©ation**
   
   `/admin/structure/types/add`

2. **Informations de base**
   
   | Champ | Valeur |
   |-------|--------|
   | Nom | Article de Blog |
   | Nom systÃ¨me (Machine name) | blog_article |
   | Description | Articles du blog TailStore |

3. **ParamÃ¨tres de publication**
   
   - âœ… PubliÃ©
   - âœ… Promu en page d'accueil (pour le bloc blog)
   - âœ… CrÃ©er une nouvelle rÃ©vision

4. **ParamÃ¨tres d'affichage**
   
   - âœ… Afficher les informations de l'auteur
   - âœ… Afficher la date de publication

5. **Enregistrer**

</Steps>

## ğŸ  CrÃ©er le type "Slide"

<Steps>

1. **AccÃ©der Ã  la crÃ©ation**
   
   `/admin/structure/types/add`

2. **Informations de base**
   
   | Champ | Valeur |
   |-------|--------|
   | Nom | Slide |
   | Nom systÃ¨me (Machine name) | slide |
   | Description | Slides du carrousel de la page d'accueil |

3. **ParamÃ¨tres de publication**
   
   - âœ… PubliÃ©
   - âŒ Promu en page d'accueil
   - âŒ CrÃ©er une nouvelle rÃ©vision

4. **ParamÃ¨tres d'affichage**
   
   - âŒ Afficher les informations de l'auteur
   - âŒ Afficher la date de publication

5. **Enregistrer**

</Steps>

## ğŸ”§ Modifier un type existant

Pour modifier un type de contenu :

1. Aller Ã  `/admin/structure/types`
2. Cliquer sur **Modifier** Ã  cÃ´tÃ© du type
3. Effectuer les changements
4. Enregistrer

### Via Drush

```bash
# Voir les informations d'un type
drush config:get node.type.product

# Modifier une propriÃ©tÃ©
drush config:set node.type.product description "Nouvelle description"
```

## ğŸ—‘ï¸ Supprimer un type de contenu

:::danger[âš ï¸ DANGER : Suppression via modification directe des YAML]

**NE SUPPRIMEZ JAMAIS un type de contenu en supprimant directement ses fichiers YAML s'il contient du contenu !**

Cela provoquera une erreur fatale lors de l'import de configuration (`drush cim`).

**Workflow sÃ»r :**
1. Supprimer le contenu via interface ou `drush entity:delete`
2. Supprimer le type via interface
3. Exporter la configuration avec `drush cex`

:::

:::caution[Suppression manuelle]
Supprimer un type de contenu supprime aussi **tous les contenus** de ce type !
:::

### MÃ©thode sÃ»re : Suppression manuelle

Pour supprimer un type de contenu en toute sÃ©curitÃ© :

1. **VÃ©rifiez s'il y a du contenu :**
   ```bash
   # Compter les contenus par type
   drush sql-query "SELECT type, COUNT(*) as count FROM node GROUP BY type;"
   ```

2. **Supprimez le contenu au prÃ©alable :**
   ```bash
   # Via l'interface : /admin/content
   # OU via Drush (supprime TOUS les contenus du type) :
   drush entity:delete node --bundle=product
   ```

3. **Supprimez le type :**
   - Aller Ã  `/admin/structure/types`
   - Cliquer sur **Supprimer** dans le menu dÃ©roulant

4. **Exportez la configuration :**
   ```bash
   drush cex -y
   ```

### âŒ MÃ©thode dangereuse : Suppression manuelle des fichiers YAML

**NE FAITES PAS Ã‡A :**
```bash
# Supprimer manuellement le fichier de config
rm config/sync/node.type.product.yml

# Importer (âŒ PLANTE si contenu existe)
drush cim -y
```

**Pourquoi Ã§a plante ?**
- Vous supprimez directement le fichier YAML
- Drupal essaie de supprimer le type de contenu Ã  l'import
- Mais il y a encore des nÅ“uds qui rÃ©fÃ©rencent ce type
- Contrainte de base de donnÃ©es violÃ©e â†’ erreur fatale

**Note :** Si vous faites les modifications via l'interface et exportez (`drush cex`), il n'y a aucun danger.

### ğŸ’¡ Solution de secours

Si vous avez dÃ©jÃ  fait l'erreur :

```bash
# RecrÃ©er temporairement le type
drush php-eval "
\Drupal\node\Entity\NodeType::create([
  'type' => 'product',
  'name' => 'Product',
])->save();
"

# Supprimer le contenu
drush entity:delete node --bundle=product

# Maintenant supprimer le type normalement
```

## ğŸ“‹ PropriÃ©tÃ©s communes

Tous les types de contenu partagent des propriÃ©tÃ©s de base :

| PropriÃ©tÃ© | Description |
|-----------|-------------|
| `title` | Titre du contenu (obligatoire) |
| `body` | Corps du texte (optionnel, peut Ãªtre supprimÃ©) |
| `nid` | ID du nÅ“ud (auto) |
| `uuid` | Identifiant universel unique (auto) |
| `created` | Date de crÃ©ation (auto) |
| `changed` | Date de modification (auto) |
| `uid` | Auteur (rÃ©fÃ©rence utilisateur) |
| `status` | PubliÃ©/non publiÃ© |
| `promote` | Promu en page d'accueil |
| `sticky` | Ã‰pinglÃ© |

## ğŸ“Š Architecture de notre projet

AprÃ¨s cette section, vous aurez crÃ©Ã© :

```
Types de contenu
â”œâ”€â”€ product          # Produits de la boutique
â”‚   â””â”€â”€ (champs Ã  ajouter)
â”œâ”€â”€ blog_article     # Articles du blog
â”‚   â””â”€â”€ (champs Ã  ajouter)
â””â”€â”€ slide           # Carrousel page d'accueil
    â””â”€â”€ (champs Ã  ajouter)
```

## ğŸ’¾ Exporter la configuration

N'oubliez pas d'exporter aprÃ¨s chaque crÃ©ation :

```bash
drush cex -y
git add config/sync/node.type.*.yml
git commit -m "feat: add product, blog_article and slide content types"
```

:::warning[âš ï¸ Import de configuration dangereux]

**ScÃ©narios :**
- âœ… **SÃ»r :** Modifications via interface â†’ `drush cex` â†’ OK
- âŒ **Dangereux :** Suppression directe du fichier YAML â†’ `drush cim` â†’ PLANTE

:::

:::tip[ğŸ’¡ RÃˆGLE D'OR]

**Ne supprimez jamais manuellement les fichiers YAML de types contenant du contenu !**

:::

## âœ… VÃ©rification

VÃ©rifiez que vos types sont crÃ©Ã©s :

```bash
drush entity:type:list --group=content | grep -E "product|blog|slide"
```

Ou dans l'interface : `/admin/structure/types`

## ğŸš€ Ã‰tape suivante

Passez aux [Champs](/etape-2-contenus/champs/) pour ajouter les champs personnalisÃ©s Ã  nos types de contenu.
